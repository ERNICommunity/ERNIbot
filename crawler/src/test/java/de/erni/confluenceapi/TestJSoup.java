package de.erni.confluenceapi;

import java.util.HashMap;
import java.util.Map;

import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;
import org.junit.Test;

public class TestJSoup {

	private String html = "<ac:layout><ac:layout-section ac:type=\"two_right_sidebar\"><ac:layout-cell><p>Content</p><p><ac:structured-macro ac:macro-id=\"f4220904-4d51-4094-85ca-976f0744b1f4\" ac:name=\"toc\" ac:schema-version=\"1\"><ac:parameter ac:name=\"outline\">true</ac:parameter><ac:parameter ac:name=\"indent\">10px</ac:parameter></ac:structured-macro></p><p>&nbsp;</p><h1>Problems &amp; goals</h1><p>Many people don't know what JavaScript is. &nbsp;They thought JavaScript is the same as Java. &nbsp;This document will explain the origin of JavaScript and its development through the years.</p><h1>Benefit</h1><ul><li>Utilizing JavaScript's capabilities.</li><li>Define web technology stack.</li></ul><h1>Input</h1><ul><li>HTML5, CSS3</li><li>Requirements for the web application</li></ul><h1>Output</h1><ul><li>Modern JavaScript Project Setup</li></ul><h1>Roles</h1><ul><li>Software Architect</li><li>Software Developer</li></ul><h1>Workflow / Process</h1><p>JavaScript is an object-oriented computer programming language commonly used to create interactive effects within web browsers. &nbsp;</p><p>JavaScript conquers the world.</p><p>At the latest with the final triumph of HTML5 JavaScript has become a part of any modern web application development. But JavaScript has also gained ground in mobile, desktop and even server programming in recent years.</p><p>The triumph of JavaScript also extends to traditional enterprise &amp; industrial applications, so that even developers in this environment more and more have to deal with it.</p><p><ac:image ac:height=\"250\"><ri:attachment ri:filename=\"notJava.png\" /></ac:image></p><h2>Origin of JavaScript</h2><ul><li><div class=\"O1\">Brendan Eich &ndash; perpetrated JavaScript in 1995</div></li><li>HyperCard for the browser</li><li>Make it look like Java!</li><li>Completed in 10 days!</li></ul><p>Source: &nbsp;<a href=\"http://javascriptjabber.com/124-jsj-the-origin-of-javascript-with-brendan-eich/\">http://javascriptjabber.com/124-jsj-the-origin-of-javascript-with-brendan-eich</a><a href=\"http://javascriptjabber.com/124-jsj-the-origin-of-javascript-with-brendan-eich/\">/</a></p><h2>History of JavaScript</h2><ul><li><p>1995: Netscape Navigator 2.0 &ndash; LiveScript</p><ul><li><p>Cooperation with Sun: JavaScript 1.0</p></li></ul></li><li><p>1996: IE 3 - JScript</p></li><li><p>1997: ECMAScript, 1998: ISO-Norm</p></li><li><p>2000-2006: Ajax Revolution</p></li><li><p>2009 Node.js created by Ryan Dahl</p></li><li><p>2010: JavaScript 1.8.5 / ECMAScript 5</p><ul><li><p>Firefox 4, IE 9</p></li></ul></li><li><p>2011: ECMAScript 5.1</p></li><li><p>June 17th 2015: ECMAScript 2015 (ES6) final Specification</p></li><li><p>Work in Progress: ECMAScript 2016 (ES7)</p></li><li><p>Today &quot;JavaScript&quot; is a trademark of Oracle Corporation</p></li><li><p>Java SE 6 contains a complete JavaScript Runtime (Rhino)</p></li><li><p>Java SE 8 contains a new JS Runtime called &ldquo;Nashorn</p></li></ul><h2>HTML5</h2><ul><li>HTML5 explained:<ul><li>Html is the structure</li><li>CSS is the colour and style</li><li><strong>JavaScript</strong> is everything else</li></ul></li></ul><h2>GitHub</h2><p><ac:image ac:height=\"400\"><ri:attachment ri:filename=\"github.png\" /></ac:image></p><h2>JavaScript: The Bad Parts</h2><h3>#1 Semicolon</h3><p>JavaScript Code:</p><ac:structured-macro ac:macro-id=\"393ca53e-fca0-4562-a71f-0aaf583206fb\" ac:name=\"code\" ac:schema-version=\"1\"><ac:parameter ac:name=\"language\">js</ac:parameter><ac:parameter ac:name=\"title\">Semicolon</ac:parameter><ac:plain-text-body><![CDATA[function getEvent() {"
			+ "    return {" + "        event: 'JS'" + "    };" + "}"
			+ "console.log(getEvent());]]></ac:plain-text-body></ac:structured-macro><p>Output:</p><ac:structured-macro ac:macro-id=\"d2547ae4-0705-4b00-a829-503f926a8c3c\" ac:name=\"code\" ac:schema-version=\"1\"><ac:parameter ac:name=\"language\">js</ac:parameter><ac:parameter ac:name=\"title\">Output</ac:parameter><ac:plain-text-body><![CDATA[{ event: 'JS' }]]></ac:plain-text-body></ac:structured-macro><p>Same JavaScript code but separate &quot;return&quot; and &quot;{&quot; symbol.</p><ac:structured-macro ac:macro-id=\"831853b7-078d-4af4-9fa2-c5f64a731df1\" ac:name=\"code\" ac:schema-version=\"1\"><ac:parameter ac:name=\"language\">js</ac:parameter><ac:parameter ac:name=\"title\">Semicolon</ac:parameter><ac:plain-text-body><![CDATA[function getEvent() {"
			+ "    return" + "	{" + "        event: 'JS'" + "    };" + "}"
			+ "console.log(getEvent());]]></ac:plain-text-body></ac:structured-macro><p>Output:</p><ac:structured-macro ac:macro-id=\"b58472ee-3e2f-4a8c-8409-1556af6fe518\" ac:name=\"code\" ac:schema-version=\"1\"><ac:parameter ac:name=\"language\">js</ac:parameter><ac:parameter ac:name=\"title\">Output</ac:parameter><ac:plain-text-body><![CDATA[undefined]]></ac:plain-text-body></ac:structured-macro><p>JavaScript puts semicolon in the &quot;return&quot; statement assuming that the line is already finished.</p><h3>#2 Boolean</h3><p>Sample 1:</p><ac:structured-macro ac:macro-id=\"d831c5f7-7011-48e5-b0f8-ece8efe05362\" ac:name=\"code\" ac:schema-version=\"1\"><ac:parameter ac:name=\"language\">js</ac:parameter><ac:parameter ac:name=\"title\">Boolean1</ac:parameter><ac:plain-text-body><![CDATA[false == false]]></ac:plain-text-body></ac:structured-macro><p>Output 1:</p><ac:structured-macro ac:macro-id=\"d384fa49-6212-4bdb-befb-28139c1f1f30\" ac:name=\"code\" ac:schema-version=\"1\"><ac:parameter ac:name=\"language\">js</ac:parameter><ac:parameter ac:name=\"title\">Output</ac:parameter><ac:plain-text-body><![CDATA[true]]></ac:plain-text-body></ac:structured-macro><p>Sample 2:</p><ac:structured-macro ac:macro-id=\"baebd955-612f-4bca-86ee-77b6c818401e\" ac:name=\"code\" ac:schema-version=\"1\"><ac:parameter ac:name=\"language\">js</ac:parameter><ac:parameter ac:name=\"title\">Boolean2</ac:parameter><ac:plain-text-body><![CDATA[false == 'false']]></ac:plain-text-body></ac:structured-macro><p>Output 2:</p><ac:structured-macro ac:macro-id=\"a3a0bfaf-18bc-4cfc-83aa-cb48134faf23\" ac:name=\"code\" ac:schema-version=\"1\"><ac:parameter ac:name=\"language\">js</ac:parameter><ac:parameter ac:name=\"title\">Output</ac:parameter><ac:plain-text-body><![CDATA[false]]></ac:plain-text-body></ac:structured-macro><p>Sample 3:</p><ac:structured-macro ac:macro-id=\"8f38d487-9cca-4210-9978-eed7ad37bb33\" ac:name=\"code\" ac:schema-version=\"1\"><ac:parameter ac:name=\"language\">js</ac:parameter><ac:parameter ac:name=\"title\">Boolean1</ac:parameter><ac:plain-text-body><![CDATA[0 == 0]]></ac:plain-text-body></ac:structured-macro><p>Output 3:</p><ac:structured-macro ac:macro-id=\"0948037b-f00a-42a1-9a18-7d28aff0b885\" ac:name=\"code\" ac:schema-version=\"1\"><ac:parameter ac:name=\"language\">js</ac:parameter><ac:parameter ac:name=\"title\">Output</ac:parameter><ac:plain-text-body><![CDATA[true]]></ac:plain-text-body></ac:structured-macro><p>Sample 4:</p><ac:structured-macro ac:macro-id=\"1ee46861-da4f-4f6e-99b9-7d279bd93689\" ac:name=\"code\" ac:schema-version=\"1\"><ac:parameter ac:name=\"language\">js</ac:parameter><ac:parameter ac:name=\"title\">Boolean2</ac:parameter><ac:plain-text-body><![CDATA[0 == '0']]></ac:plain-text-body></ac:structured-macro><p>Output 4:</p><ac:structured-macro ac:macro-id=\"4bd1eebf-01c5-425f-b409-93e4c405a607\" ac:name=\"code\" ac:schema-version=\"1\"><ac:parameter ac:name=\"language\">js</ac:parameter><ac:parameter ac:name=\"title\">Output</ac:parameter><ac:plain-text-body><![CDATA[true]]></ac:plain-text-body></ac:structured-macro><p>Sample 5:</p><ac:structured-macro ac:macro-id=\"66c30102-8722-4f23-a4fc-2ba018af6054\" ac:name=\"code\" ac:schema-version=\"1\"><ac:parameter ac:name=\"language\">js</ac:parameter><ac:parameter ac:name=\"title\">Boolean1</ac:parameter><ac:plain-text-body><![CDATA[0 == '']]></ac:plain-text-body></ac:structured-macro><p>Output 5:</p><ac:structured-macro ac:macro-id=\"cbae4646-3911-4a08-b084-58d0cb520534\" ac:name=\"code\" ac:schema-version=\"1\"><ac:parameter ac:name=\"language\">js</ac:parameter><ac:parameter ac:name=\"title\">Output</ac:parameter><ac:plain-text-body><![CDATA[true]]></ac:plain-text-body></ac:structured-macro><p>Sample 6:</p><ac:structured-macro ac:macro-id=\"8bca7d10-a47c-43d5-8f5a-5248950ec02a\" ac:name=\"code\" ac:schema-version=\"1\"><ac:parameter ac:name=\"language\">js</ac:parameter><ac:parameter ac:name=\"title\">Boolean2</ac:parameter><ac:plain-text-body><![CDATA[false == '']]></ac:plain-text-body></ac:structured-macro><p>Output 6:</p><ac:structured-macro ac:macro-id=\"436f8d50-5393-4b56-9c5a-8331c0aa809d\" ac:name=\"code\" ac:schema-version=\"1\"><ac:parameter ac:name=\"language\">js</ac:parameter><ac:parameter ac:name=\"title\">Output</ac:parameter><ac:plain-text-body><![CDATA[true]]></ac:plain-text-body></ac:structured-macro><p>Sample 7:</p><ac:structured-macro ac:macro-id=\"50cf4261-0954-4241-a3ef-0ec550b05890\" ac:name=\"code\" ac:schema-version=\"1\"><ac:parameter ac:name=\"language\">js</ac:parameter><ac:parameter ac:name=\"title\">Boolean1</ac:parameter><ac:plain-text-body><![CDATA[false === '']]></ac:plain-text-body></ac:structured-macro><p>Output 7:</p><ac:structured-macro ac:macro-id=\"2c38922b-68f4-4dce-baba-02ff53465369\" ac:name=\"code\" ac:schema-version=\"1\"><ac:parameter ac:name=\"language\">js</ac:parameter><ac:parameter ac:name=\"title\">Output</ac:parameter><ac:plain-text-body><![CDATA[false]]></ac:plain-text-body></ac:structured-macro><p>The idea here is to put 3 equal signs (===) whenever you want to create a conditional statement in JavaScript so that even the data type is considered</p><p>&nbsp;</p><p>&nbsp;</p><p>Sample 8:</p><ac:structured-macro ac:macro-id=\"f3fcdabd-6b8d-4762-b4b8-abd14fb8c067\" ac:name=\"code\" ac:schema-version=\"1\"><ac:parameter ac:name=\"language\">js</ac:parameter><ac:parameter ac:name=\"title\">Boolean2</ac:parameter><ac:plain-text-body><![CDATA[Array(16).join( 'hero'-1) + \" Batman\";]]></ac:plain-text-body></ac:structured-macro><p>Output 8:</p><ac:structured-macro ac:macro-id=\"ad483643-809c-4f73-a3ef-510fec9da301\" ac:name=\"code\" ac:schema-version=\"1\"><ac:parameter ac:name=\"language\">js</ac:parameter><ac:parameter ac:name=\"title\">Output</ac:parameter><ac:plain-text-body><![CDATA[\"NaNNaNNaNNaNNaNNaNNaNNaNNaNNaNNaNNaNNaNNaNNaN Batman\"]]></ac:plain-text-body></ac:structured-macro><p>&nbsp;</p><p>&nbsp;</p><h1>Used Service Items and related Service Patterns</h1><p>The following service items are used in this Service Item:</p><table><tbody><tr><th>Nr.</th><th>Service Item</th></tr><tr><td>1</td><td>Name of Service Item with link to it</td></tr><tr><td>2</td><td>&nbsp;</td></tr></tbody></table><p>This Service Item is used by the following Service patterns:</p><table><tbody><tr><th>Nr.</th><th>Service Pattern</th></tr><tr><td>1</td><td>Name of Service pattern with link to it</td></tr><tr><td>2</td><td>&nbsp;</td></tr></tbody></table><p>&nbsp;</p><h1>Methods &amp; models</h1><table><tbody><tr><th>Method</th><th>Description / Notes</th></tr><tr><td>Method 1</td><td>Description 1</td></tr><tr><td>Method 2</td><td>Description 2</td></tr><tr><td>..</td><td>..</td></tr></tbody></table><h1>Tools &amp; templates</h1><p><span style=\"color: rgb(0,0,0);\">Insert here the links to the tools &amp; templates in the service sharepoint library</span></p><h1>Lessons learnt</h1><h1>Glossary</h1><h1>FAQ</h1><h1>list of literature</h1><table><tbody><tr><th>Title</th><th>Author</th><th>ISBN</th><th>Notes</th></tr><tr><td>Title</td><td>Name</td><td>000-0-0000-0000-0</td><td>Page/Chapter</td></tr><tr><td>Exp: Projektmanagement - Das Wissen f&uuml;r Profis</td><td>Bruno Jenny</td><td>978-3-7281-3095-2</td><td>page 552 - 589</td></tr><tr><td>Exp: A guide to the Project Management Body of Knowledge</td><td>PMBOK Guide</td><td>none</td><td>chapter 11</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table><p>Labels</p><p><ac:structured-macro ac:macro-id=\"c228615b-5deb-45cf-97cb-30bce6b3e34a\" ac:name=\"page-info\" ac:schema-version=\"1\"><ac:parameter ac:name=\"page\"><ac:link><ri:page ri:content-title=\"@self\" /></ac:link></ac:parameter><ac:parameter ac:name=\"\">labels</ac:parameter></ac:structured-macro></p><hr /><p><ac:structured-macro ac:macro-id=\"ae296882-b2b2-44db-9db8-f20c57cf22d3\" ac:name=\"add-label\" ac:schema-version=\"1\"><ac:parameter ac:name=\"labels\">service-item </ac:parameter></ac:structured-macro></p></ac:layout-cell><ac:layout-cell><p>Status: <ac:structured-macro ac:macro-id=\"acc8f100-8747-4e3f-a385-4791d0373564\" ac:name=\"status\" ac:schema-version=\"1\"><ac:parameter ac:name=\"colour\">Yellow</ac:parameter></ac:structured-macro></p><hr /><p><em> <em> <em> <strong>Latest ERNI official version:</strong> </em> </em> </em></p><table><tbody><tr><th>Version</th><th>Link</th><th>Date</th><th>Authority</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table><p>&nbsp;</p><p><ac:structured-macro ac:macro-id=\"efc3893e-226f-4691-8a82-b5b7d6c7c68e\" ac:name=\"profile-picture\" ac:schema-version=\"1\"><ac:parameter ac:name=\"User\"><ri:user ri:username=\"none\" /></ac:parameter></ac:structured-macro></p><ac:structured-macro ac:macro-id=\"177f4667-bc18-4a97-ae58-f5252e046015\" ac:name=\"details\" ac:schema-version=\"1\"><ac:parameter ac:name=\"label\">sio</ac:parameter><ac:rich-text-body><table><tbody><tr><td colspan=\"1\">SI-Owner</td><td colspan=\"1\">@ your name</td></tr></tbody></table></ac:rich-text-body></ac:structured-macro><ac:structured-macro ac:macro-id=\"36de87be-a78f-42c6-9878-dd91bb106658\" ac:name=\"multivote\" ac:schema-version=\"1\"><ac:parameter ac:name=\"id\">sitemplate</ac:parameter><ac:rich-text-body><table><tbody><tr><th>ID</th><th>Usage</th></tr><tr><td>1</td><td>I read this SI</td></tr><tr><td>2</td><td>I was trained on this SI</td></tr><tr><td colspan=\"1\">3</td><td colspan=\"1\">I used this SI in my project</td></tr></tbody></table></ac:rich-text-body></ac:structured-macro><p>please read, <ac:link><ri:page ri:content-title=\"How to set up page rating\" ri:space-key=\"THTUC\" /><ac:plain-text-link-body><![CDATA[how to set-up rating]]></ac:plain-text-link-body></ac:link> as SI-Owner</p><p>&nbsp;</p><p><strong>Contributors to this page:</strong></p><p><ac:structured-macro ac:macro-id=\"af2d2d1e-3ac4-4dbb-ade1-a1a501e1673f\" ac:name=\"contributors\" ac:schema-version=\"1\"><ac:parameter ac:name=\"mode\">list</ac:parameter><ac:parameter ac:name=\"noneFoundMessage\">no one has yet contributed ;-(</ac:parameter><ac:parameter ac:name=\"showCount\">true</ac:parameter><ac:parameter ac:name=\"showLastTime\">true</ac:parameter><ac:parameter ac:name=\"order\">update</ac:parameter></ac:structured-macro></p></ac:layout-cell></ac:layout-section></ac:layout>";

	@Test
	public void thisTest() {

		Map<String, String> headerPatterns = new HashMap<String, String>();
		headerPatterns.put("Benefit", "WHAT IS THE BENEFIT OF @serviceName");
		headerPatterns.put("Problems &amp; goals", "WHAT IS @serviceName");
		headerPatterns.put("Input", "WHAT DO YOU NEED FOR @serviceName");
		headerPatterns.put("Output", "WHAT DO YOU GET FROM @serviceName");
		headerPatterns.put("Roles", "WHAT ARE THE ROLES OF @serviceName");
		headerPatterns.put("Workflow / Process", "WHAT DO YOU KNOW ABOUT @serviceName");
		headerPatterns.put("Tools &amp; templates", "WHICH TOOLS DO YOU NEEDE FOR @serviceName");
		headerPatterns.put("Lessons learnt", "WHAT HAVE YOU LEARNED FROM @serviceName");

		Map<String, String> categories = new HashMap<String, String>();

		Document doc = Jsoup.parse(html);
		Elements headers = doc.getElementsByTag("h1");

		for (int i = 0; i < headers.size() - 1; i++) {
			Element next = headers.get(i).nextElementSibling();
			String header = headers.get(i).text();
			System.out.println("########" + header);
			StringBuilder template = new StringBuilder();
			while (!next.tagName().equals("h1")) {
				System.out.print(next.text());
				template.append(next.text());
				next = next.nextElementSibling();
			}

			String newTemplate = headerPatterns.get(header);
			if (newTemplate != null && !"".equals(template.toString())) {
				categories.put(newTemplate.replace("@serviceName", "JavaScript".toUpperCase()), template.toString());
			}

			

			System.out.println("\n");
		}
		
		String eol = System.getProperty("line.separator");
		
		StringBuilder aiml = new StringBuilder();
		aiml.append("<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?>").append(eol);
		aiml.append("<aiml>").append(eol);
		
		for (Map.Entry<String, String> entry : categories.entrySet()) {
			aiml.append("<category>").append(eol);
			aiml.append("<pattern>").append(entry.getKey()).append("</pattern>").append(eol);
			aiml.append("<template>").append(entry.getValue()).append("</template>").append(eol);
			aiml.append("</category>").append(eol);
			
		}
		
		aiml.append("</aiml>").append(eol);
		System.out.println(aiml.toString());
	}
}
